<!DOCTYPE html>
<html>
<head>
	<title>Controller</title>
    <style>
    </style>
<script src="jquery.js"></script>


</head>
<body>
<button style="padding: 2em" onclick="Api('land');">LAND</button>
<button style="padding: 2em" onclick="Api('takeoff');">Takeoff</button>
<button style="padding: 2em" onclick="Api('stop');">Stop</button>
<button style="padding: 2em" onclick="Api('camera/0');">Front Camera</button>
<button style="padding: 2em" onclick="Api('camera/3');">Bottom Camera</button>
<br>
<br>
<br>
<br>
<div 
<div id="batteryStatus" style="font-padding: 2em; font-size:5em"></div>
</body>
</html>
<script >
    $(document).keydown(function(e) {
    switch(e.which) {
        case 37: Api("left/0.01");
        break;

        case 38: Api("up/0.01");
        break;

        case 39: Api("right/0.01");
        break;

        case 40: Api("down/0.01");
        break;
        
        case 65: Api("counterClockwise/0.01");
        break;

        case 87: Api("front/0.01");
        break;

        case 68: Api("clockwise/0.01");
        break;

        case 83: Api("back/0.01");
        break;

        case 13: Api("takeoff");
        break;

        case 32: Api("land");
        break;

        case 16: Api("stop");
        break;

        
        default: break; // exit this handler for other keys
    }
    e.preventDefault(); // prevent the default action (scroll / move caret)
});
$(document).keyup(function(e) {
    Api("stop");    
});


setInterval ( function() {
                fetch('http://localhost:3000/battery').then(function(response) {
                        console.log (response.json().then(function(data) {
                                $("#batteryStatus").html(data.battery);
                }))
            });
}, 5000);



function Api(str){
    fetch('http://localhost:3000/'+str).then(x => { 
        console.log(str, x.url);
    })
}
</script>
